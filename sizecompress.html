<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K36CY569X6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-K36CY569X6');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0a0e27" />
  <link rel="canonical" href="https://image-cut.com/compress.html" />

  <title>Image Compressor | Image Cut</title>
  <meta name="description" content="Compress images locally in your browser to under 2 MB while keeping pixel dimensions. Multiple uploads supported. Privacy-first — no uploads." />
  <meta name="robots" content="index, follow" />

  <!-- Favicons / Fonts / Icons -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7617954284506964"
     crossorigin="anonymous"></script>

  <!-- browser-image-compression (CDN) -->
  <script src="https://unpkg.com/browser-image-compression@1.0.16/dist/browser-image-compression.js"></script>

  <!-- JSZip for zip downloads -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js" integrity="sha512-/uZg8U9zQePq1w0k0xwQxkUp2v0zGq1vO3TgkYQqg2i3mW+LDBmQ2s2g7QHk1+u6WcR9z7QbK9iQzqz5x3k9cg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <style>
    :root { --accent:#a6c1ee; --muted:#c9c9c9; --panel: rgba(255,255,255,0.08); }

    html,body { height:100%; margin:0; font-family:'Poppins',sans-serif; background: linear-gradient(135deg,#0a0e27,#1a1a2e,#16213e,#000000); background-size:400% 400%; animation: gradientBG 15s ease infinite; color:#fff; display:flex; flex-direction:column; min-height:100vh; -webkit-font-smoothing:antialiased; }

    @keyframes gradientBG { 0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%} }

    /* Top nav */
    .top-nav { position:fixed; top:0; left:0; right:0; background: rgba(10,14,39,0.9); backdrop-filter: blur(10px); padding: 10px 18px; display:flex; justify-content:space-between; align-items:center; z-index:1000; box-shadow:0 4px 20px rgba(0,0,0,0.3); }
    .logo { display:flex; align-items:center; gap:8px; text-decoration:none; color:inherit; }
    .logo img{ height:32px; border-radius:6px; }
    .logo-text{ font-size:1rem; font-weight:600; color:#fff; }
    .nav-buttons{ display:flex; gap:10px; overflow-x:auto; -webkit-overflow-scrolling:touch; }
    .nav-btn{ background:transparent; border:2px solid var(--accent); color:#fff; padding:6px 14px; border-radius:30px; font-size:.85rem; font-weight:600; cursor:pointer; white-space:nowrap; }
    .nav-btn:hover{ background:var(--accent); color:#0a0e27; transform:translateY(-2px); }

    main { flex:1 0 auto; max-width:980px; margin:110px auto 40px; padding:0 18px; box-sizing:border-box; }

    .intro-section { text-align:center; margin-bottom:18px; }
    .intro-section h2 { font-size:1.6rem; margin:0 0 8px; }
    .intro-section p { color:var(--muted); margin:0; }

    .container { background: var(--panel); border-radius:18px; padding:26px; max-width:760px; margin: 18px auto 0; backdrop-filter: blur(8px); box-shadow:0 8px 32px rgba(0,0,0,0.28); border:1px solid rgba(255,255,255,0.12); }

    .upload-row { display:flex; flex-direction:column; gap:12px; align-items:center; }
    .upload-area { width:100%; border:2px dashed rgba(166,193,238,0.45); border-radius:12px; padding:18px; cursor:pointer; text-align:center; transition: all .18s; }
    .upload-area:hover { background: rgba(255,255,255,0.02); }
    .upload-area i { font-size:1.8rem; color:var(--accent); margin-bottom:8px; display:block; }
    input[type=file] { display:none; }

    .controls { display:flex; gap:10px; justify-content:center; align-items:center; margin-top:8px; flex-wrap:wrap; }
    .btn-primary { background: linear-gradient(90deg,var(--accent),#fbc2eb); border:none; color:#0a0e27; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; }
    .btn-secondary { background:transparent; border:1px solid rgba(255,255,255,0.08); color:#fff; padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer; }

    .file-list { margin-top:12px; display:flex; flex-direction:column; gap:10px; max-height:260px; overflow:auto; padding-right:6px; width:100%; }
    .file-row { display:flex; gap:10px; align-items:center; background: rgba(0,0,0,0.12); padding:10px; border-radius:10px; }
    .thumb { width:84px; height:60px; object-fit:cover; border-radius:8px; flex:0 0 84px; background:#111; }
    .meta { flex:1 1 auto; min-width:0; }
    .meta strong { display:block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .meta .muted { color:var(--muted); font-size:0.9rem; margin-top:6px; }

    .results-area { margin-top:18px; display:flex; flex-direction:column; gap:12px; max-width:100%; }
    .result-row { display:flex; gap:12px; align-items:center; padding:10px; border-radius:10px; background: rgba(0,0,0,0.12); overflow:hidden; box-sizing:border-box; }
    .result-row img { flex:0 0 88px; width:88px; height:60px; object-fit:cover; border-radius:8px; }
    .result-meta { flex:1 1 auto; min-width:0; overflow:hidden; text-align:left; }
    .result-meta strong { display:block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .result-meta .muted { color:var(--muted); margin-top:6px; font-size:0.88rem; }
    .result-actions { flex:0 0 auto; }

    .progress { height:8px; background: rgba(255,255,255,0.06); border-radius:8px; overflow:hidden; margin-top:12px; width:100%; }
    .progress > i { display:block; height:100%; width:0%; background: linear-gradient(90deg,#6a85b6,var(--accent)); transition: width 220ms linear; }

    footer { flex-shrink:0; background: rgba(10,14,39,0.85); backdrop-filter: blur(6px); color: #bbbbbb; font-size: 0.9rem; text-align:center; padding:12px 14px; border-top: 1px solid rgba(255,255,255,0.08); margin-top:24px; }
    footer a{ color:var(--accent); text-decoration:none; margin:0 8px; }
    footer a:hover{ text-decoration:underline; }

    @media (max-width:768px){
      .container{ padding:18px; max-width:92%; }
      .thumb{ width:64px; height:46px; flex:0 0 64px; }
      .result-row img{ width:72px; height:52px; flex:0 0 72px; }
      .nav-btn i{ display:none; }
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <div class="top-nav">
    <a class="logo" href="/"><img src="/imagecutlogo.png" alt="Image Cut logo"><span class="logo-text">Image Cut</span></a>
    <div class="nav-buttons">
      <button class="nav-btn" onclick="location.href='/compress'"><i class="fas fa-scissors"></i> Image Compressor</button>
      <button class="nav-btn" onclick="location.href='/convert'"><i class="fas fa-sync-alt"></i> Image Format Converter</button>
      <button class="nav-btn" onclick="location.href='/pdfconvert'"><i class="fas fa-file-pdf"></i> JPG to PDF</button>
    </div>
  </div>

  <main>
    <div class="intro-section">
      <h2>Compress your images instantly</h2>
      <p>Fast, simple, and optimized for web & social media. Files are processed locally — we never upload them.</p>
    </div>

    <div class="container" role="main" aria-label="Image Size Compressor">
      <h1 style="margin-top:0;font-size:1.4rem;">Smart Image Compressor — keep resolution, reduce file size</h1>

      <div class="upload-row">
        <div id="uploadArea" class="upload-area" tabindex="0" role="button" aria-label="Upload images">
          <i class="fas fa-upload"></i>
          <div><strong>Drop images here or click to select</strong></div>
          <small style="color:var(--muted)">Supports JPG, PNG, WebP (up to ~50 MB). Multiple selection allowed.</small>
          <input id="fileInput" type="file" accept="image/*" multiple>
        </div>

        <div style="display:flex; gap:12px; align-items:center; width:100%; justify-content:flex-start; margin-top:8px;">
          <label style="color:var(--muted); font-size:0.9rem; display:flex; gap:8px; align-items:center;">
            <input id="allowConversion" type="checkbox" checked style="transform:scale(1.1); margin-right:6px;">
            Allow format conversion (PNG → WebP) — recommended for smaller files
          </label>
        </div>

        <div id="fileList" class="file-list" aria-live="polite"></div>

        <div class="controls">
          <button id="convertBtn" class="btn-primary" disabled><i class="fas fa-magic"></i> Convert</button>
          <button id="clearBtn" class="btn-secondary" disabled>Clear</button>
        </div>

        <div class="progress"><i id="globalProg"></i></div>
        <div id="globalStatus" style="color:var(--muted); margin-top:8px;">No files selected.</div>

        <div id="results" class="results-area" aria-live="polite"></div>

        <div id="downloadAllWrap" style="margin-top:12px; display:none;">
          <button id="downloadAllBtn" class="btn-primary">Download All Files</button>
        </div>
      </div>
    </div>
  </main>
<!-- ====================== INFO SECTION (Place above footer) ====================== -->
<section class="info-section">
  <div class="how-it-works">
    <h2>How Image Cut Compression Works</h2>
    <p>
      Image Cut uses advanced browser-based compression algorithms that reduce file size 
      while maintaining full pixel quality. All processing happens directly on your device — 
      your images never leave your computer, ensuring total privacy and speed.
    </p>
    <ul>
      <li>✅ Compress images locally in your browser</li>
      <li>✅ Maintain original resolution and clarity</li>
      <li>✅ Works with JPG, PNG, and WebP files</li>
      <li>✅ 100% secure — no uploads, no tracking</li>
    </ul>
  </div>

  

  <div class="why-compress">
    <h2>Why Compress Your Images?</h2>
    <p>
      Large image files slow down websites, consume storage, and reduce user experience. 
      By compressing images, you make your pages load faster, save bandwidth, and improve 
      your SEO performance — all without sacrificing visual quality.
    </p>
  </div>

  <div class="faq">
    <h2>Frequently Asked Questions</h2>
    <details>
      <summary>Is Image Cut safe to use?</summary>
      <p>Yes. All compression happens in your browser — your files never leave your device.</p>
    </details>
    <details>
      <summary>Does compression affect image quality?</summary>
      <p>No. Our algorithm optimizes your image to reduce file size while preserving clarity.</p>
    </details>
    <details>
      <summary>Which image formats can I compress?</summary>
      <p>Currently, Image Cut supports JPG, PNG, and WebP. More formats are coming soon!</p>
    </details>
    <details>
      <summary>Can I compress multiple images at once?</summary>
      <p>Yes! Upload several images, and Image Cut will process them together efficiently.</p>
    </details>
  </div>
</section>

<!-- FAQ structured data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Is Image Cut safe to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. All compression happens in your browser — your files never leave your device."
      }
    },
    {
      "@type": "Question",
      "name": "Does compression affect image quality?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. Our algorithm optimizes your image to reduce file size while preserving clarity."
      }
    },
    {
      "@type": "Question",
      "name": "Which image formats can I compress?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Currently, Image Cut supports JPG, PNG, and WebP. More formats are coming soon!"
      }
    },
    {
      "@type": "Question",
      "name": "Can I compress multiple images at once?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! Upload several images, and Image Cut will process them together efficiently."
      }
    }
  ]
}
</script>

<!-- ====================== END INFO SECTION ====================== -->

<style>
.info-section {
  max-width: 900px;
  margin: 60px auto 80px;
  padding: 20px 24px;
  color: #e0e0e0;
  line-height: 1.6;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  backdrop-filter: blur(8px);
}

.info-section h2 {
  color: #a6c1ee;
  text-align: center;
  margin-bottom: 16px;
  font-size: 1.5rem;
  font-weight: 600;
}

.info-section p {
  text-align: center;
  margin-bottom: 20px;
  color: #cfcfcf;
}

.info-section ul {
  list-style: none;
  padding: 0;
  margin: 20px auto 0;
  text-align: center;
}

.info-section ul li {
  margin: 8px 0;
}

/* AD CONTAINER – reduce top/bottom gap */
.ad-container {
  margin: 10px auto 20px;
  text-align: center;
}

.why-compress {
  margin-top: 20px;
}

.faq {
  margin-top: 40px;
}

.faq details {
  background: rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  margin-bottom: 10px;
  padding: 10px 16px;
  cursor: pointer;
  transition: background 0.3s;
}

.faq details:hover {
  background: rgba(255, 255, 255, 0.1);
}

.faq summary {
  font-weight: 600;
  color: #fff;
  outline: none;
}

.faq p {
  margin: 10px 0 0;
  color: #cfcfcf;
  font-size: 0.9rem;
}

<style>
/* Prevent large empty space if no ad loads */
.ad-container {
  margin: 10px auto 0;
  text-align: center;
  min-height: 0;
}

/* Collapse spacing completely when empty */
.ad-container:empty {
  display: none;
}

/* Keep nice balance above 'Why Compress' */
.why-compress {
  margin-top: 20px !important;
}
</style>


  <footer>
    <p>&copy; 2025 Image Cut | <a href="/privacy">Privacy Policy</a> | <a href="mailto:contact@image-cut.com">Contact Us</a></p>
    <p>Your files are processed locally. Nothing is uploaded or stored — 100% secure and private.</p>
  </footer>

<script>
/* ====== SETTINGS ====== */
const TARGET_MB = 2; // target per-file size in MB
const MAX_SIZE_MB = TARGET_MB;
const USE_WEB_WORKER = true;

/* Elements */
const fileInput = document.getElementById('fileInput');
const uploadArea = document.getElementById('uploadArea');
const allowConversionCheckbox = document.getElementById('allowConversion');
const fileList = document.getElementById('fileList');
const convertBtn = document.getElementById('convertBtn');
const clearBtn = document.getElementById('clearBtn');
const globalProg = document.getElementById('globalProg');
const globalStatus = document.getElementById('globalStatus');
const results = document.getElementById('results');
const downloadAllWrap = document.getElementById('downloadAllWrap');
const downloadAllBtn = document.getElementById('downloadAllBtn');

let files = [];
let compressedResults = [];

/* Helper */
function humanBytes(bytes){ if(bytes===0) return '0 B'; const units=['B','KB','MB','GB']; let i=Math.floor(Math.log(bytes)/Math.log(1024)); if(i<0)i=0; return (bytes/Math.pow(1024,i)).toFixed(i===0?0:(i===1?1:2))+' '+units[i]; }
function esc(s){ return (s+'').replace(/[&<>"']/g, (m)=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]); }

/* UI: render file list */
function renderFileList(){
  fileList.innerHTML = '';
  if(!files.length){ resetUI(); return; }
  files.forEach((f, idx) => {
    const row = document.createElement('div'); row.className='file-row';
    const thumb = document.createElement('img'); thumb.className='thumb'; thumb.alt=f.name;
    const meta = document.createElement('div'); meta.className='meta';
    meta.innerHTML = `<strong title="${esc(f.name)}">${f.name}</strong><div class="muted">Original: ${humanBytes(f.size)}</div><div class="muted" id="status-${idx}">Waiting</div>`;
    const actions = document.createElement('div'); actions.className='file-actions';
    const removeBtn = document.createElement('button'); removeBtn.className='btn-secondary'; removeBtn.textContent='Remove';
    removeBtn.onclick = ()=>{ files.splice(idx,1); renderFileList(); };
    actions.appendChild(removeBtn);
    row.appendChild(thumb); row.appendChild(meta); row.appendChild(actions);
    fileList.appendChild(row);
    const reader = new FileReader(); reader.onload = (e)=> thumb.src = e.target.result; reader.readAsDataURL(f);
  });
  convertBtn.disabled=false; clearBtn.disabled=false;
  globalStatus.textContent = `${files.length} file(s) selected.`;
  results.innerHTML = '<div style="color:var(--muted)">Ready to convert — click Convert.</div>';
}

/* Drag/drop & file selection */
uploadArea.addEventListener('click', ()=> fileInput.click());
uploadArea.addEventListener('dragover', (e)=>{ e.preventDefault(); uploadArea.style.opacity='0.95'; });
uploadArea.addEventListener('dragleave', ()=>{ uploadArea.style.opacity='1'; });
uploadArea.addEventListener('drop', (e)=>{ e.preventDefault(); uploadArea.style.opacity='1'; if(e.dataTransfer && e.dataTransfer.files) handleFiles(e.dataTransfer.files); });
fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));
clearBtn.addEventListener('click', resetUI);

function handleFiles(list){
  const incoming = Array.from(list).filter(f => f.type && f.type.startsWith('image/'));
  files = incoming;
  renderFileList();
}

/* Reset UI */
function resetUI(){
  fileList.innerHTML=''; results.innerHTML = '<div style="color:var(--muted)">No results yet — click Convert to start.</div>';
  convertBtn.disabled=true; clearBtn.disabled=true; downloadAllWrap.style.display='none';
  globalProg.style.width='0%'; globalStatus.textContent='No files selected.'; compressedResults=[]; files=[]; fileInput.value='';
}

/* Compression logic using browser-image-compression */
async function compressWithLibrary(file, allowConversion){
  // options: try to reach target MB, preserve dimensions
  const optionsBase = {
    maxSizeMB: MAX_SIZE_MB,
    useWebWorker: USE_WEB_WORKER,
    // do not change dimensions:
    maxWidthOrHeight: Math.max(file.width || 99999, file.height || 99999),
    onProgress: (p) => { /* optional per-file progress hook if needed */ }
  };

  // try preserving original format first (if possible)
  try {
    // If preserving format, set fileType to original mime; otherwise let library choose (it may convert to webp/jpeg)
    let preserveFormat = true;
    let firstAttemptOptions = Object.assign({}, optionsBase);
    firstAttemptOptions.fileType = file.type; // attempt same format

    // browser-image-compression will attempt to compress; for PNG this will often not reduce
    const compressed = await imageCompression(file, firstAttemptOptions);
    // if compression produced smaller file -> accept
    if (compressed.size < file.size && compressed.size <= MAX_SIZE_MB * 1024 * 1024) {
      return { success:true, blob:compressed, reason:'preserved-format-compressed' };
    }

    // If not smaller and conversion allowed, try converting to webp (excellent compression)
    if (allowConversion) {
      let convOptions = Object.assign({}, optionsBase);
      // prefer webp for better compression; fallback to jpeg if webp not supported is handled by library
      convOptions.fileType = 'image/webp';
      const converted = await imageCompression(file, convOptions);
      if (converted.size < file.size) {
        return { success:true, blob:converted, reason:'converted-to-webp' };
      }
    }

    // if neither produced smaller file, return original (no gain)
    return { success:false, blob:file, reason:'no-improvement' };

  } catch (err) {
    console.error('compressWithLibrary error', err);
    // on error, return original
    return { success:false, blob:file, reason:'error' };
  }
}

/* Main convert flow */
convertBtn.addEventListener('click', async () => {
  if (!files.length) { alert('Please upload at least one image.'); return; }
  convertBtn.disabled = true; clearBtn.disabled = true;
  compressedResults = [];
  results.innerHTML = '';
  globalProg.style.width = '2%';
  globalStatus.textContent = 'Starting compression...';

  const allowConversion = allowConversionCheckbox.checked;

  for (let i=0; i<files.length; i++){
    const f = files[i];
    const statusElem = document.getElementById(`status-${i}`);
    if (statusElem) statusElem.textContent = 'Compressing...';
    globalProg.style.width = `${Math.round((i/files.length)*40)}%`;
    globalStatus.textContent = `Processing ${i+1} of ${files.length}: ${f.name}`;

    try {
      // compress using library
      const res = await compressWithLibrary(f, allowConversion);
      const outBlob = res.blob;
      // pick output extension: if converted to webp and original was png, users may expect webp; but we keep outBlob.type for MIME
      const outExt = (outBlob.type && outBlob.type.split('/')[1]) || (f.name.split('.').pop()) || 'jpg';
      const base = f.name.replace(/\.[^/.]+$/, "");
      const outName = `${base}-compressed.${outExt}`;

      // ensure we never present a file larger than original: if compressed bigger -> fallback original
      const finalBlob = (outBlob.size < f.size) ? outBlob : f;
      const finalSize = finalBlob.size;

      compressedResults.push({ origName: f.name, outName, blob: finalBlob, origSize: f.size, outSize: finalSize, width: null, height: null });

      // create image element to get resolution if needed
      const img = new Image();
      img.src = URL.createObjectURL(finalBlob);
      await img.decode().catch(()=>{});
      const w = img.naturalWidth || 0, h = img.naturalHeight || 0;

      // update file status row if present
      if (statusElem) statusElem.innerHTML = (finalBlob.size < f.size) ? `Done — ${humanBytes(finalBlob.size)} <span class="muted">(${w}×${h})</span>` : `No size improvement — preserved original`;

      // append result
      const r = document.createElement('div'); r.className='result-row';
      const thumb = document.createElement('img'); thumb.src = URL.createObjectURL(finalBlob);
      const meta = document.createElement('div'); meta.className='result-meta';
      const savedPct = Math.round((1 - (finalBlob.size / f.size)) * 100);
      meta.innerHTML = `<strong title="${esc(outName)}">${outName}</strong>
                        <div class="muted">Original: ${humanBytes(f.size)} → Compressed: ${humanBytes(finalBlob.size)}</div>
                        <div class="muted">Saved: ${savedPct}% • Resolution: ${w} × ${h}px</div>`;
      const actions = document.createElement('div'); actions.className='result-actions';
      const dl = document.createElement('button'); dl.className='btn-primary'; dl.textContent='Download';
      dl.onclick = ()=> { const a = document.createElement('a'); a.href = URL.createObjectURL(finalBlob); a.download = outName; a.click(); };
      actions.appendChild(dl);
      r.appendChild(thumb); r.appendChild(meta); r.appendChild(actions);
      results.appendChild(r);

    } catch (err) {
      console.error('per-file compress error', err);
      const r = document.createElement('div'); r.className='result-row'; r.innerHTML = `<div style="color:#ffb3b3">Error compressing ${esc(f.name)}</div>`;
      results.appendChild(r);
    }

    globalProg.style.width = `${Math.round(((i+1)/files.length)*85)}%`;
  } // end for

  globalProg.style.width = '100%';
  globalStatus.textContent = `Completed ${compressedResults.length} file(s).`;
  convertBtn.disabled = false; clearBtn.disabled = false;

  if (compressedResults.length > 1){
    downloadAllWrap.style.display = 'block';
    // attach handler
    document.getElementById('downloadAllBtn').onclick = downloadAll;
  } else {
    downloadAllWrap.style.display = 'none';
  }
});

/* Download all as ZIP */
async function downloadAll(){
  if (compressedResults.length < 2) return;
  const btn = document.getElementById('downloadAllBtn'); btn.disabled = true; btn.textContent='Preparing ZIP...';
  const zip = new JSZip();
  for (const r of compressedResults){
    const arr = await r.blob.arrayBuffer();
    zip.file(r.outName, arr);
  }
  const content = await zip.generateAsync({type:'blob'}, (meta)=> { globalStatus.textContent = `Zipping: ${Math.round(meta.percent)}%`; });
  const a = document.createElement('a'); a.href = URL.createObjectURL(content); a.download = 'image-cut-compressed.zip'; a.click();
  btn.disabled = false; btn.textContent='Download All Files';
  globalStatus.textContent = `ZIP ready — ${humanBytes(content.size)}`;
}

/* Initial reset */
resetUI();
</script>
</body>
</html>
