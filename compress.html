<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Resizer â€” Resize Image Dimensions</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="styles.css">
  
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7617954284506964" crossorigin="anonymous"></script>
</head>

<body>
  <div class="top-nav">
    <a href="/" class="logo">
      <img src="images/imagecutlogo.png" alt="Image Cut Logo">
      <span class="logo-text">Image Cut</span>
    </a>
    <div class="nav-buttons">
      <button class="nav-btn" onclick="location.href='/'"><i class="fas fa-home"></i> Home</button>
      <button class="nav-btn active" onclick="location.href='/compress'"><i class="fas fa-scissors"></i> Compress</button>
      <button class="nav-btn" onclick="location.href='/convert'"><i class="fas fa-sync-alt"></i> Convert</button>
      <button class="nav-btn" onclick="location.href='/pdfconvert'"><i class="fas fa-file-pdf"></i>JPG to PDF</button>
      <button class="nav-btn" onclick="location.href='/sizecompress'"><i class="fas fa-compress-arrows-alt"></i> Size Compress</button>
    </div>
  </div>

  <main class="tool-page">
    <div class="container">
      <h1><i class="fas fa-scissors"></i> Image Resizer</h1>
      
      <div id="dropZone" class="drop-zone">
        <p>Drag & Drop or click below</p>
        <button class="file-input-button">Choose Image</button>
        <input type="file" id="imageInput" accept="image/*" style="display:none;">
      </div>

      <div class="preview-container">
        <img id="previewImage" alt="Preview" />
        <div id="metaInfo" style="margin-top:10px; color:#ccc; display:none;"></div>
      </div>

      <div class="tool-controls">
        <select id="sizeSelect">
          <option value="original">Original (no resize)</option>
          <option value="instagram_post">Instagram Post (1080x1080)</option>
          <option value="facebook_post">Facebook Post (1200x630)</option>
          <option value="custom">Custom Dimensions</option>
        </select>
        
        <select id="formatSelect">
          <option value="webp">WEBP</option>
          <option value="jpeg">JPG</option>
          <option value="png">PNG</option>
        </select>
        
        <div id="customInputs" class="small-inputs" style="display:none;">
          <input type="number" id="customWidth" placeholder="Width">
          <input type="number" id="customHeight" placeholder="Height">
        </div>
        
        <label style="color:#ccc; font-size:0.9rem; margin-top:10px;">
            <input type="checkbox" id="maintainAspect" checked> Maintain Aspect Ratio
        </label>
        
        <button id="compressButton" style="display:none;">Resize & Download</button>
        <a id="downloadLink" style="display:none;"></a>
      </div>
      
      <canvas id="canvas" style="display:none;"></canvas>
    </div>

    <section class="content-info">
      <h2>About Image Resizer</h2>
      <p>Resize pixel dimensions instantly in your browser without losing quality. Perfect for social media, thumbnails, and web optimization.</p>
    </section>
  </main>

  <footer class="privacy-footer">
    <p>Processed locally. Secure & Private.</p>
  </footer>

  <script>
    /* Image Resizer Logic */
    const dropZone = document.getElementById('dropZone');
    const imageInput = document.getElementById('imageInput');
    const previewImage = document.getElementById('previewImage');
    const metaInfo = document.getElementById('metaInfo');
    const sizeSelect = document.getElementById('sizeSelect');
    const formatSelect = document.getElementById('formatSelect');
    const customInputs = document.getElementById('customInputs');
    const customWidth = document.getElementById('customWidth');
    const customHeight = document.getElementById('customHeight');
    const maintainAspect = document.getElementById('maintainAspect');
    const compressButton = document.getElementById('compressButton');
    const canvas = document.getElementById('canvas');
    const downloadLink = document.getElementById('downloadLink');
    
    let currentFile = null;
    let origW = 0;
    let origH = 0;

    // UI Interaction
    dropZone.addEventListener('click', (e) => {
      // Prevent double triggering if button is clicked
      if(e.target.tagName !== 'BUTTON') imageInput.click();
    });
    
    // Specific listener for the button inside dropzone
    document.querySelector('.file-input-button').addEventListener('click', (e) => {
       e.stopPropagation();
       imageInput.click();
    });

    dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('dragover'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
    dropZone.addEventListener('drop', (e) => {
      e.preventDefault(); 
      dropZone.classList.remove('dragover'); 
      if(e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]);
    });

    imageInput.addEventListener('change', (e) => {
      if(e.target.files[0]) handleFile(e.target.files[0]);
    });

    function handleFile(f) {
      if(!f.type.startsWith('image/')) return alert('Images only.');
      currentFile = f;
      const r = new FileReader();
      r.onload = (e) => {
        previewImage.src = e.target.result;
        previewImage.style.display = 'block';
        previewImage.onload = () => {
           origW = previewImage.naturalWidth; 
           origH = previewImage.naturalHeight;
           metaInfo.style.display = 'block'; 
           metaInfo.textContent = `${origW} x ${origH} px`;
           compressButton.style.display = 'inline-block';
        };
      };
      r.readAsDataURL(f);
    }

    sizeSelect.addEventListener('change', () => { 
      customInputs.style.display = sizeSelect.value === 'custom' ? 'flex' : 'none'; 
    });

    compressButton.addEventListener('click', () => {
      if(!currentFile) return;
      
      let w = origW, h = origH;
      
      if(sizeSelect.value === 'custom') { 
         w = parseInt(customWidth.value) || origW; 
         h = parseInt(customHeight.value) || origH; 
      } else if(sizeSelect.value === 'instagram_post') { 
         w = 1080; h = 1080; 
      } else if(sizeSelect.value === 'facebook_post') { 
         w = 1200; h = 630; 
      }
      // Add other presets logic here if needed

      canvas.width = w; 
      canvas.height = h;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(previewImage, 0, 0, w, h);
      
      let mime = 'image/webp';
      if(formatSelect.value === 'jpeg') mime = 'image/jpeg';
      if(formatSelect.value === 'png') mime = 'image/png';

      canvas.toBlob((blob) => {
         const url = URL.createObjectURL(blob);
         const a = document.createElement('a'); 
         a.href = url; 
         a.download = `resized.${mime.split('/')[1]}`;
         a.click();
      }, mime, 0.9);
    });
  </script>
</body>
</html>